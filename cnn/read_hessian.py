import json
import numpy as np
import numpy.linalg as LA

# file = open('../tmp/DARTS/hessian_stat_no_bn_lr_025_ch_16_hessian_time_48.json', 'r', encoding='utf-8')
# hessians = []
# evs = []
# for line in file.readlines():
#     dic = json.loads(line)
#     H = np.array(dic['H'])
#     ev = max(LA.eigvals(H))
#     # ev = LA.norm(ev)
#     hessians.append(H)
#     evs.append(ev)
#
# print(evs)

import matplotlib.pyplot as plt

evs = [0.0896729911694, 0.1334849940650539, 0.08859675103002329, 0.10971707992747676, 0.09683077599280951, 0.07756755755025677, 0.11069382011664777, 0.09472669009228127, 0.053320389945710034, 0.08427828826120155, 0.10614599423558556, 0.0989693103932427, 0.10075838770038298, 0.08082652525884368, 0.0968167682626549, 0.09578912475943427, 0.1056384785371921, 0.1114808044188665, 0.1404075395086602, 0.17967578552896735, 0.14154289404420134, 0.11861411547474154, 0.16950963805312122, 0.09477757384055459, 0.17020070655686168, 0.22748117902611076, 0.14577037934420348, 0.17820953795198954, 0.16488866039124747, 0.3072233567881133, 0.2056754319251202, 0.3101153773660726, 0.263007972107432, 0.28148102976069267, 0.5694936629799232, 0.3005759114439842, 0.2768681418867597, 0.21116710385343987, 0.3499904587580074, 0.3543222104911071, 0.17699399595835366, 0.3747444855724601, 0.18910327213088518, 0.401797704018519, 0.16775397392875369, 0.2182491401895217, 0.2655546287660788, 0.25985928429271216, 0.24996177047739865, 0.2363013084740104]

plt.plot(range(50),evs)
plt.xlabel('Epoch')
plt.ylabel('Max Eigenvalue')
plt.show()
